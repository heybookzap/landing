<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="description" content="Dawn 430 OS Beta — 개인화된 '오늘 1개' 추천 + Proof로 쌓이는 진지한 실행 루프 (14일 무료 베타)" />
  <meta property="og:title" content="Dawn 430 OS Beta" />
  <meta property="og:description" content="무료 베타 모집 • 14일 • 개인화 '오늘 1개' + Proof 루프" />
  <meta property="og:type" content="website" />
  <title>Dawn 430 OS Beta</title>

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;500;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      /* Brand palette (from your swatches) */
      --p: #0097A7;   /* primary */
      --a: #44C0C5;   /* accent */
      --d: #003D40;   /* dark */
      --bg: #F7FAFB;
      --card: #FFFFFF;
      --txt: #0B1F22;
      --muted: rgba(11,31,34,.64);
      --line: rgba(0,0,0,.08);
      --shadow: 0 14px 40px rgba(0,0,0,.08);
      --shadow2: 0 6px 18px rgba(0,0,0,.08);
      --r: 18px;
    }

    *{ box-sizing: border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: Pretendard, system-ui, -apple-system, Segoe UI, Roboto, "Noto Sans KR", Arial, sans-serif;
      background: radial-gradient(800px 400px at 20% 5%, rgba(68,192,197,.15), transparent 55%),
                  radial-gradient(900px 480px at 80% 0%, rgba(0,151,167,.18), transparent 50%),
                  var(--bg);
      color: var(--txt);
    }

    a{ color: inherit; text-decoration: none; }
    .wrap{ max-width: 1080px; margin: 0 auto; padding: 28px 18px 64px; }
    .topbar{
      display:flex; align-items:center; justify-content:space-between;
      gap:12px; padding: 8px 4px 18px;
    }
    .brand{
      display:flex; align-items:center; gap:10px;
    }
    .logo{
      width: 36px; height: 36px; border-radius: 12px;
      background: conic-gradient(from 210deg, var(--p), var(--a), var(--d));
      box-shadow: var(--shadow2);
    }
    .brand .title{
      display:flex; flex-direction:column; line-height:1.1;
    }
    .brand .title strong{ font-size: 14px; letter-spacing: .2px; }
    .brand .title span{ font-size: 12px; color: var(--muted); }

    .pill{
      display:inline-flex; align-items:center; gap:8px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.7);
      padding: 10px 12px;
      border-radius: 999px;
      box-shadow: 0 2px 10px rgba(0,0,0,.04);
      color: var(--muted);
      font-size: 12px;
      white-space: nowrap;
    }
    .dot{ width:8px; height:8px; border-radius: 99px; background: var(--p); }

    /* Hero */
    .hero{
      display:grid; grid-template-columns: 1.15fr .85fr;
      gap: 18px;
      align-items: stretch;
      margin-top: 6px;
    }
    @media (max-width: 860px){
      .hero{ grid-template-columns: 1fr; }
    }

    .card{
      background: var(--card);
      border: 1px solid var(--line);
      border-radius: var(--r);
      box-shadow: var(--shadow);
    }

    .hero-left{
      padding: 28px 24px;
      position: relative;
      overflow:hidden;
    }
    .hero-left:before{
      content:"";
      position:absolute; inset:-2px -2px auto auto;
      width: 240px; height: 240px;
      background: radial-gradient(circle at 30% 30%, rgba(68,192,197,.25), transparent 60%),
                  radial-gradient(circle at 70% 40%, rgba(0,151,167,.22), transparent 55%);
      filter: blur(2px);
      border-radius: 50%;
      transform: translate(40px,-40px);
      pointer-events:none;
    }

    h1{
      margin: 0 0 10px;
      font-size: clamp(24px, 3.2vw, 38px);
      letter-spacing: -.5px;
      line-height: 1.12;
    }
    .sub{
      margin: 0 0 16px;
      color: var(--muted);
      font-size: 15px;
      line-height: 1.45;
      max-width: 60ch;
    }

    .hero-cta{
      display:flex; flex-wrap:wrap;
      gap: 10px;
      margin-top: 18px;
      align-items:center;
    }
    .btn{
      display:inline-flex; align-items:center; justify-content:center;
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.8);
      color: var(--txt);
      font-weight: 600;
      font-size: 14px;
      cursor:pointer;
      transition: transform .08s ease, box-shadow .08s ease, background .08s ease;
      user-select:none;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 10px 24px rgba(0,0,0,.08); }
    .btn.primary{
      background: linear-gradient(135deg, rgba(0,151,167,.95), rgba(68,192,197,.95));
      color: white;
      border-color: rgba(255,255,255,.22);
    }
    .btn.primary:hover{ box-shadow: 0 14px 30px rgba(0,151,167,.20); }

    .mini{
      display:flex; gap: 10px; flex-wrap:wrap;
      margin-top: 16px;
    }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      border: 1px solid var(--line);
      border-radius: 999px;
      padding: 9px 10px;
      background: rgba(255,255,255,.65);
      font-size: 12.5px;
      color: var(--muted);
    }
    .chip b{ color: var(--txt); font-weight:700; }
    .chip .k{
      width: 8px; height: 8px; border-radius: 99px; background: var(--a);
    }

    /* Right preview */
    .preview{
      padding: 18px 18px 16px;
      display:flex; flex-direction:column; gap: 12px;
    }
    .preview h3{
      margin: 2px 2px 0;
      font-size: 14px;
      color: var(--muted);
      font-weight: 700;
      letter-spacing: .2px;
    }
    .bubble{
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 12px 12px;
      background: rgba(255,255,255,.7);
      box-shadow: 0 8px 20px rgba(0,0,0,.06);
    }
    .bubble .t{
      font-size: 12px; color: var(--muted); margin-bottom: 6px;
      display:flex; justify-content:space-between; gap: 10px;
    }
    .bubble .msg{
      font-size: 14px; line-height: 1.45;
      white-space: pre-line;
    }

    /* Sections */
    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 18px;
      margin-top: 18px;
    }
    @media (max-width: 900px){
      .grid{ grid-template-columns: 1fr; }
    }

    .section{
      padding: 22px 20px;
    }
    .section h2{
      margin: 0 0 10px;
      font-size: 18px;
      letter-spacing: -.2px;
    }
    .section p{
      margin: 0 0 10px;
      color: var(--muted);
      line-height: 1.55;
      font-size: 14px;
    }
    .ul{
      margin: 10px 0 0;
      padding: 0 0 0 18px;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.6;
    }
    .ul li{ margin: 6px 0; }
    .tag{
      display:inline-flex; align-items:center; gap:6px;
      padding: 6px 10px;
      background: rgba(68,192,197,.12);
      border: 1px solid rgba(68,192,197,.22);
      color: var(--d);
      border-radius: 999px;
      font-size: 12px;
      font-weight: 700;
    }

    /* Timeline */
    .timeline{
      display:flex;
      flex-direction:column;
      gap: 10px;
      margin-top: 8px;
    }
    .step{
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 12px 12px;
      background: rgba(255,255,255,.65);
    }
    .step .head{
      display:flex; align-items:center; justify-content:space-between;
      gap: 12px; margin-bottom: 6px;
    }
    .step .head b{
      font-size: 13px;
      letter-spacing: -.1px;
    }
    .step .head span{
      font-size: 12px; color: var(--muted);
    }
    .step .body{
      font-size: 13.5px; color: var(--muted);
      line-height: 1.5;
      white-space: pre-line;
    }

    /* Form */
    .form{
      padding: 22px 20px 18px;
    }
    .form h2{ margin:0 0 6px; font-size:18px; }
    .form .hint{ margin:0 0 14px; color: var(--muted); font-size: 13.5px; line-height: 1.5; }

    .row{
      display:grid; grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 12px;
    }
    @media (max-width: 860px){ .row{ grid-template-columns: 1fr; } }

    label{
      display:block;
      font-size: 12.5px;
      color: var(--muted);
      margin: 0 0 6px 2px;
    }
    input, textarea, select{
      width:100%;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.9);
      padding: 12px 12px;
      font-size: 14px;
      outline: none;
      color: var(--txt);
      transition: box-shadow .12s ease, border-color .12s ease;
    }
    textarea{ min-height: 96px; resize: vertical; }
    input:focus, textarea:focus, select:focus{
      border-color: rgba(0,151,167,.45);
      box-shadow: 0 0 0 4px rgba(0,151,167,.14);
    }
    .small{
      font-size: 12px; color: var(--muted);
      margin-top: 8px; line-height: 1.45;
    }
    .actions{
      display:flex; gap: 10px; align-items:center; flex-wrap: wrap;
      margin-top: 14px;
    }
    .toast{
      margin-top: 10px;
      font-size: 13px;
      color: var(--d);
      background: rgba(68,192,197,.12);
      border: 1px solid rgba(68,192,197,.22);
      padding: 10px 12px;
      border-radius: 14px;
      display:none;
    }
    .divider{
      height: 1px;
      background: var(--line);
      margin: 18px 0;
    }

    /* Footer */
    footer{
      margin-top: 18px;
      color: var(--muted);
      font-size: 12.5px;
      line-height: 1.5;
      padding: 4px 2px 0;
    }
    footer b{ color: var(--txt); }
  </style>
</head>

<body>
  <div class="wrap">

    <!-- Topbar -->
    <div class="topbar">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div class="title">
          <strong>Dawn 430 OS</strong>
          <span>Beta • 실행 루프 운영</span>
        </div>
      </div>
      <div class="pill" title="운영 안내">
        <span class="dot"></span>
        무료 베타 • 14일 • 개인화 “오늘 1개” • Proof 루프
      </div>
    </div>

    <!-- Hero -->
    <div class="hero">
      <div class="card hero-left">
        <h1>무료 베타 모집<br/>14일 동안 “오늘 1개” 루프를 설치합니다</h1>

        <p class="sub">
          이 베타는 동기부여가 아니라 <b>운영되는 실행 루프</b>를 만드는 프로그램입니다.<br/>
          온보딩 2분 → Day1 개인화 추천 → Day2부터는 Proof 기반으로 매일 업데이트됩니다.
        </p>

        <div class="mini">
          <span class="chip"><span class="k"></span><b>개인화</b> → “나한테 맞다” 체감</span>
          <span class="chip"><span class="k"></span><b>연속 학습</b> → 어제 Proof 기반 추천</span>
          <span class="chip"><span class="k"></span><b>진지한 루프</b> → 증명이 쌓일 때 완성</span>
        </div>

        <div class="hero-cta">
          <a class="btn primary" href="#apply">무료 베타 신청하기</a>
          <a class="btn" href="#how">진행 방식 보기</a>
          <span class="pill"><span class="dot"></span>정원 제한 • Proof 제출자 우선</span>
        </div>

        <div class="divider"></div>

        <p class="sub" style="margin-bottom:0;">
          <span class="tag">참여 적합 조건</span><br/>
          ① 이번 주 미루면 치명적인 프로젝트가 1개 있는 사람<br/>
          ② “결정/실행/증명” 중 어디서 막히는지 분명히 알고 싶은 사람<br/>
          ③ 하루 50분 + Proof 1줄(또는 사진 1장)을 14일간 남길 수 있는 사람
        </p>
      </div>

      <!-- Preview -->
      <div class="card preview" aria-label="메시지 미리보기">
        <h3>메시지 미리보기</h3>

        <div class="bubble">
          <div class="t">
            <span>Day1 • 04:30</span>
            <span>폼 기반 추천</span>
          </div>
          <div class="msg" id="msgDay1">
오늘 1개: [프로젝트명]
→ 이게 오늘 1개인 이유: (1줄 설명)</div>
        </div>

        <div class="bubble">
          <div class="t">
            <span>Day1 • 05:50</span>
            <span>Proof 요청</span>
          </div>
          <div class="msg" id="msgProof">
이 50분이 ‘쌓이는 순간’입니다.
텍스트 1줄 / 사진 1장으로 Proof 남겨주세요.
(이게 없으면 루프가 끊어져요)</div>
        </div>

        <div class="bubble">
          <div class="t">
            <span>Day2 • 04:30</span>
            <span>미제출 대응</span>
          </div>
          <div class="msg" id="msgMiss">
어제 Proof가 비었네요.
‘진지한 루프’는 증명이 있어야 완성됩니다.

오늘 동일 항목으로 재도전 → 05:00 시작하세요.</div>
        </div>

        <div class="small">
          * 실제 운영에서는 “어제 Proof 결과”에 따라 오늘 1개가 <b>동일/로테이션/마감 우선</b>으로 업데이트됩니다.
        </div>
      </div>
    </div>

    <!-- Sections -->
    <div class="grid">

      <!-- How -->
      <div class="card section" id="how">
        <h2>진행 방식</h2>
        <p>
          첫날은 “개인화”, 그 다음부터는 “연속성”이 핵심입니다.
          불필요한 고민을 줄이고, 매일 같은 방식으로 쌓이게 만듭니다.
        </p>

        <div class="timeline">
          <div class="step">
            <div class="head">
              <b>온보딩 폼 (2분)</b>
              <span>신청과 동시에 개인화 시작</span>
            </div>
            <div class="body">- 이번 주 밀면 치명적인 프로젝트 1개
- 우선순위 후보 3개
- 현재 가장 막힌 부분(결정/실행/증명)</div>
          </div>

          <div class="step">
            <div class="head">
              <b>Day1 04:30 — 오늘 1개 + 이유 1줄</b>
              <span>개인화 추천</span>
            </div>
            <div class="body">“오늘 1개: [프로젝트명]”
→ “왜 오늘 1개인지” 1줄 설명 포함</div>
          </div>

          <div class="step">
            <div class="head">
              <b>Day2~ — 어제 Proof 기반 업데이트</b>
              <span>연속성 루프</span>
            </div>
            <div class="body">“어제 Proof 결과 기반 → 오늘 1개: 동일/로테이션/마감 우선”
→ ‘연속 학습’이 쌓이며 고민이 줄어듭니다.</div>
          </div>

          <div class="step">
            <div class="head">
              <b>Proof 제출 — “진지한 실행”의 기준</b>
              <span>텍스트 1줄 / 사진 1장</span>
            </div>
            <div class="body">Proof는 벌이 아니라 “증명 의식”입니다.
증명이 남는 순간, 루프가 완성됩니다.</div>
          </div>
        </div>

        <div class="divider"></div>

        <p style="margin-bottom:0;">
          <span class="tag">운영 메모</span><br/>
          무료 베타는 운영 가능한 인원까지만 받습니다. 정원 도달 시 조기 마감됩니다.
        </p>
      </div>

      <!-- Rules -->
      <div class="card section">
        <h2>운영 규칙</h2>
        <p>
          이 베타는 “가볍게 참여”가 아니라, “쌓이는 실행”을 전제로 합니다.
        </p>

        <ul class="ul">
          <li>
            <b>Proof 요청(05:50)</b> —<br/>
            “이 50분이 ‘쌓이는 순간’입니다.<br/>
            텍스트 1줄 / 사진 1장으로 Proof 남겨주세요.<br/>
            (이게 없으면 루프가 끊어져요)”
          </li>

          <li>
            <b>미제출 대응(다음날 04:30)</b> —<br/>
            “어제 Proof가 비었네요.<br/>
            ‘진지한 루프’는 증명이 있어야 완성됩니다.<br/><br/>
            오늘 동일 항목으로 재도전 → 05:00 시작하세요.”
          </li>

          <li>
            <b>2회 누적 미제출</b> —<br/>
            “베타 규칙상 종료 단계입니다.<br/>
            Dawn 430 OS는 ‘증명이 쌓이는 루프’입니다.<br/>
            진지하게 실행하고 싶다면 재신청하세요.<br/>
            (7일간 4일 이상 Proof 누적자만 재신청 가능)”
          </li>

          <li>
            <b>재신청 기준</b> — “7일 중 4일 이상 Proof 누적자만 재신청 가능”
          </li>
        </ul>

        <div class="divider"></div>

        <p style="margin-bottom:0;">
          <span class="tag">목표</span><br/>
          14일 안에 “자동 고민 해결 + 진지한 루프” 체감을 만들고, 재현 가능한 구조로 고정합니다.
        </p>
      </div>

    </div>

    <!-- Apply -->
    <div class="card form" id="apply">
      <h2>무료 베타 신청 (온보딩 2분)</h2>
      <p class="hint">
        입력 내용은 <b>Day1 04:30</b> “오늘 1개” 추천의 근거가 됩니다.<br/>
        <b>이번 주 밀면 치명적인 1개</b>를 정확히 적어주세요.
      </p>

      <form id="betaForm">
        <div class="row">
          <div>
            <label for="contact">연락 받을 곳 (이메일 또는 인스타 아이디)</label>
            <input id="contact" name="contact" placeholder="예: email@domain.com 또는 @yourid" required />
          </div>
          <div>
            <label for="stuck">현재 가장 막힌 부분</label>
            <select id="stuck" name="stuck" required>
              <option value="" disabled selected>선택</option>
              <option value="결정">결정</option>
              <option value="실행">실행</option>
              <option value="증명">증명</option>
            </select>
          </div>
        </div>

        <div>
          <label for="criticalProject">이번 주 밀면 치명적인 프로젝트 1개</label>
          <input id="criticalProject" name="criticalProject" placeholder="예: 유료 전환 카피 확정 / 핵심 기능 릴리즈" required />
        </div>

        <div style="margin-top:12px;">
          <label for="candidates">우선순위 후보 3개 리스트 (줄바꿈으로 3개 적기)</label>
          <textarea id="candidates" name="candidates" placeholder="1) 후보 A&#10;2) 후보 B&#10;3) 후보 C" required></textarea>
        </div>

        <div style="margin-top:12px;">
          <label for="note">추가 메모(선택) — 방해 요인 / 제약 조건</label>
          <textarea id="note" name="note" placeholder="예: 오전에 메시지/요청이 많음 / 회의가 잦음 / 시작 장벽이 큼"></textarea>
        </div>

        <div class="actions">
          <button class="btn primary" type="submit">무료 베타 신청 제출</button>
          <button class="btn" type="button" id="fillDemo">예시 채우기</button>
          <span class="pill"><span class="dot"></span>제출 후 Day1 메시지가 개인화됩니다</span>
        </div>

        <div class="toast" id="toast"></div>

        <div class="small">
          제출된 정보는 “오늘 1개 추천”과 “Proof 루프 운영” 목적 외에는 사용하지 않습니다.
        </div>
      </form>
    </div>

    <!-- FAQ -->
    <div class="grid" style="margin-top:18px;">
      <div class="card section">
        <h2>FAQ</h2>
        <p><b>Q. 비용이 있나요?</b><br/>
          A. 이번 페이지는 <b>무료 베타</b> 신청용입니다. 운영 가능한 인원 기준으로 제한됩니다.
        </p>
        <p><b>Q. 베타는 어떤 방식으로 진행되나요?</b><br/>
          A. Day1은 폼 기반 개인화, Day2부터는 “어제 Proof 결과”를 기반으로 오늘 1개가 업데이트됩니다.
        </p>
        <p><b>Q. Proof를 왜 요구하나요?</b><br/>
          A. Proof가 없으면 루프가 끊어져서 개인화가 이어지지 않습니다. 이 베타는 “진지한 실행 루프”가 목적입니다.
        </p>
      </div>

      <div class="card section">
        <h2>운영 체크리스트 (내부용)</h2>
        <ul class="ul">
          <li>온보딩 폼: 프로젝트 1개 + 후보 3개 + 막힌 부분</li>
          <li>Day1: “왜 오늘 1개인지” 1줄 설명 포함</li>
          <li>Day2~: 어제 Proof 기반 추천(연속성 체감)</li>
          <li>Proof 문구: “쌓이는 순간” 프레임 유지</li>
          <li>미제출: 벌이 아닌 “루프 완성 위해 재도전”</li>
          <li>종료: “진지한 실행자 재신청” 규칙</li>
        </ul>
      </div>
    </div>

    <footer>
      <b>Dawn 430 OS</b> • Beta 운영 페이지<br/>
      문의는 DM 또는 위 입력한 연락처로 안내됩니다.
    </footer>
  </div>

  <script>
    /**
     * ✅ Make.com Webhook 연결 방법
     * 1) Make.com에서 Webhooks → Custom webhook 생성
     * 2) 생성된 URL을 아래 WEBHOOK_URL에 넣기
     * 3) 본 HTML을 업로드/배포하면 제출 데이터가 Make로 전송됩니다.
     *
     * ⚠️ 웹훅을 아직 안 붙일 거면, WEBHOOK_URL을 빈 문자열로 두면
     *   "로컬 제출 성공" 메시지만 띄우고 종료합니다.
     */
    const WEBHOOK_URL = ""; // <-- 여기에 Make 웹훅 URL 붙여넣기

    const form = document.getElementById("betaForm");
    const toast = document.getElementById("toast");

    const contact = document.getElementById("contact");
    const stuck = document.getElementById("stuck");
    const criticalProject = document.getElementById("criticalProject");
    const candidates = document.getElementById("candidates");
    const note = document.getElementById("note");

    const msgDay1 = document.getElementById("msgDay1");

    function showToast(message, ok=true){
      toast.style.display = "block";
      toast.textContent = message;
      toast.style.background = ok ? "rgba(68,192,197,.12)" : "rgba(0,0,0,.06)";
      toast.style.borderColor = ok ? "rgba(68,192,197,.22)" : "rgba(0,0,0,.10)";
      setTimeout(()=>{ toast.style.display="none"; }, 3500);
    }

    function oneLineReason(project, stuckValue){
      // “왜 오늘 1개인지” 기본 자동 생성 (운영 편의용)
      const base = project?.trim() || "이 프로젝트";
      if(stuckValue === "결정") return `${base}는 이번 주 의사결정이 늦어지면 연쇄로 밀려서 오늘 확정이 필요합니다.`;
      if(stuckValue === "실행") return `${base}는 시작만 되면 진척이 빠른 항목이라 오늘 1세트가 유효합니다.`;
      if(stuckValue === "증명") return `${base}는 결과가 남아야 다음 선택이 쉬워져서 오늘 Proof가 필요합니다.`;
      return `${base}는 이번 주 리스크를 줄이기 위해 오늘 1개로 고정합니다.`;
    }

    function updatePreview(){
      const pj = criticalProject.value.trim() || "[프로젝트명]";
      const s = stuck.value || "";
      const reason = s ? oneLineReason(pj, s) : "(1줄 설명)";
      msgDay1.textContent = `오늘 1개: ${pj}\n→ 이게 오늘 1개인 이유: ${reason}`;
    }

    criticalProject.addEventListener("input", updatePreview);
    stuck.addEventListener("change", updatePreview);

    document.getElementById("fillDemo").addEventListener("click", ()=>{
      contact.value = "@dawn430_archive";
      stuck.value = "실행";
      criticalProject.value = "무료 베타 온보딩 동선 점검";
      candidates.value = "1) Day1 메시지 템플릿 확정\n2) Proof 제출 폼 완성\n3) 안내 메시지 자동화";
      note.value = "오전엔 메시지/요청이 많아서 시작이 느려지는 편";
      updatePreview();
      showToast("예시 입력을 채웠어요. 제출하면 운영 자동화로 전달됩니다.");
    });

    form.addEventListener("submit", async (e)=>{
      e.preventDefault();

      if(!contact.value.trim() || !stuck.value || !criticalProject.value.trim() || !candidates.value.trim()){
        showToast("필수 항목을 채워주세요.", false);
        return;
      }

      const payload = {
        type: "dawn430_beta_onboarding",
        submitted_at: new Date().toISOString(),
        contact: contact.value.trim(),
        stuck: stuck.value,
        critical_project: criticalProject.value.trim(),
        candidates: candidates.value.trim(),
        note: note.value.trim(),
        auto_reason: oneLineReason(criticalProject.value.trim(), stuck.value),
      };

      if(!WEBHOOK_URL){
        console.log("SUBMIT_PAYLOAD", payload);
        showToast("제출 완료. (웹훅 미연결 상태라 콘솔에만 저장됨)");
        form.reset();
        updatePreview();
        return;
      }

      try{
        const res = await fetch(WEBHOOK_URL, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify(payload)
        });

        if(!res.ok){
          throw new Error("Webhook response not ok");
        }

        showToast("제출 완료. 운영 채널로 안내를 보내드릴게요.");
        form.reset();
        updatePreview();
      }catch(err){
        console.error(err);
        showToast("전송 실패. 잠시 후 다시 시도해주세요.", false);
      }
    });

    // initial preview
    updatePreview();
  </script>
</body>
</html>
